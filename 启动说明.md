# ç”µå•†åå°ç®¡ç†ç³»ç»Ÿ - å¯åŠ¨è¯´æ˜

## âœ… é¡¹ç›®æ„å»ºçŠ¶æ€

- **ç¼–è¯‘çŠ¶æ€**ï¼šâœ… æˆåŠŸ
- **æ‰“åŒ…çŠ¶æ€**ï¼šâœ… æˆåŠŸ
- **ç”Ÿæˆæ–‡ä»¶**ï¼š`target/admin-0.0.1-SNAPSHOT.jar` (çº¦ 64MB)

## ğŸ“‹ å¯åŠ¨å‰å‡†å¤‡

### 1. ç¯å¢ƒè¦æ±‚

- âœ… JDK 21
- âš ï¸ MySQL 8.0+ ï¼ˆéœ€è¦å¯åŠ¨ï¼‰
- âš ï¸ Redis 6.0+ ï¼ˆéœ€è¦å¯åŠ¨ï¼‰

### 2. åˆ›å»ºæ•°æ®åº“

```sql
CREATE DATABASE mall_admin CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 3. é…ç½®æ–‡ä»¶

ä¿®æ”¹ `src/main/resources/application-dev.yml`ï¼š

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/mall_admin?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai&useSSL=false
    username: root
    password: ä½ çš„MySQLå¯†ç 
    
  data:
    redis:
      host: localhost
      port: 6379
      password: ä½ çš„Rediså¯†ç ï¼ˆå¦‚æœæœ‰ï¼‰
```

## ğŸš€ å¯åŠ¨æ–¹å¼

### æ–¹å¼ä¸€ï¼šMaven å¯åŠ¨ï¼ˆå¼€å‘ç¯å¢ƒæ¨èï¼‰

```bash
cd H:\code\backend\admin
mvn spring-boot:run
```

### æ–¹å¼äºŒï¼šç›´æ¥è¿è¡Œ JAR åŒ…ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

```bash
cd H:\code\backend\admin
java -jar target/admin-0.0.1-SNAPSHOT.jar
```

### æ–¹å¼ä¸‰ï¼šæŒ‡å®šç¯å¢ƒå¯åŠ¨

```bash
# å¼€å‘ç¯å¢ƒ
java -jar target/admin-0.0.1-SNAPSHOT.jar --spring.profiles.active=dev

# ç”Ÿäº§ç¯å¢ƒ
java -jar target/admin-0.0.1-SNAPSHOT.jar --spring.profiles.active=prod
```

## ğŸ“Š éªŒè¯å¯åŠ¨

å¯åŠ¨æˆåŠŸåï¼Œè®¿é—®ä»¥ä¸‹åœ°å€ï¼š

1. **API æ–‡æ¡£**ï¼šhttp://localhost:8080/api/admin/v1/doc.html
2. **å¥åº·æ£€æŸ¥**ï¼šhttp://localhost:8080/api/admin/v1/actuator/health
3. **Swagger JSON**ï¼šhttp://localhost:8080/api/admin/v1/v3/api-docs

## ğŸ” æµ‹è¯•ç™»å½•

### ä½¿ç”¨ API æ–‡æ¡£æµ‹è¯•

1. è®¿é—®ï¼šhttp://localhost:8080/api/admin/v1/doc.html
2. æ‰¾åˆ° "è®¤è¯ç®¡ç†" -> "ç”¨æˆ·ç™»å½•" æ¥å£
3. ç‚¹å‡» "è°ƒè¯•"
4. è¾“å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š
   ```json
   {
     "username": "admin",
     "password": "admin123"
   }
   ```
5. ç‚¹å‡» "å‘é€"
6. è·å–è¿”å›çš„ token
7. ç‚¹å‡»å³ä¸Šè§’ "Authorize"ï¼Œè¾“å…¥ï¼š`Bearer {ä½ çš„token}`
8. ç°åœ¨å¯ä»¥æµ‹è¯•å…¶ä»–éœ€è¦è®¤è¯çš„æ¥å£

### ä½¿ç”¨ curl æµ‹è¯•

```bash
# ç™»å½•è·å– token
curl -X POST "http://localhost:8080/api/admin/v1/auth/login" \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'

# ä½¿ç”¨ token è®¿é—®å—ä¿æŠ¤çš„æ¥å£
curl -X GET "http://localhost:8080/api/admin/v1/categories/tree" \
  -H "Authorization: Bearer {ä½ çš„token}"
```

## ğŸ“ é»˜è®¤è´¦å·

| ç”¨æˆ·å | å¯†ç  | è§’è‰² | è¯´æ˜ |
|--------|------|------|------|
| admin | admin123 | è¶…çº§ç®¡ç†å‘˜ | æ‹¥æœ‰æ‰€æœ‰æƒé™ |
| operator | admin123 | è¿è¥ç®¡ç†å‘˜ | å•†å“ã€è®¢å•ã€è¥é”€ç®¡ç† |
| analyst | admin123 | æ•°æ®åˆ†æå‘˜ | ä»…æŸ¥çœ‹æ•°æ®ç»Ÿè®¡ |

## âš ï¸ å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`Communications link failure`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ MySQL æœåŠ¡æ˜¯å¦å¯åŠ¨
- æ£€æŸ¥æ•°æ®åº“åœ°å€ã€ç«¯å£ã€ç”¨æˆ·åã€å¯†ç æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥æ•°æ®åº“ `mall_admin` æ˜¯å¦å·²åˆ›å»º

### 2. Redis è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`Unable to connect to Redis`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ Redis æœåŠ¡æ˜¯å¦å¯åŠ¨
- æ£€æŸ¥ Redis åœ°å€ã€ç«¯å£æ˜¯å¦æ­£ç¡®
- å¦‚æœè®¾ç½®äº†å¯†ç ï¼Œæ£€æŸ¥å¯†ç æ˜¯å¦æ­£ç¡®

### 3. ç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯**ï¼š`Port 8080 is already in use`

**è§£å†³æ–¹æ¡ˆ**ï¼š
ä¿®æ”¹ `application.yml` ä¸­çš„ç«¯å£ï¼š
```yaml
server:
  port: 8081  # æ”¹æˆå…¶ä»–ç«¯å£
```

### 4. Flyway è¿ç§»å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`FlywayException: Validate failed`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ¸…ç©ºæ•°æ®åº“åé‡æ–°å¯åŠ¨
- æˆ–è€…ç¦ç”¨ Flyway éªŒè¯ï¼š`spring.flyway.validate-on-migrate=false`

## ğŸ¯ å¯åŠ¨æˆåŠŸæ ‡å¿—

çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼š

```
========================================
ç”µå•†åå°ç®¡ç†ç³»ç»Ÿå¯åŠ¨æˆåŠŸï¼
APIæ–‡æ¡£åœ°å€: http://localhost:8080/api/admin/v1/doc.html
========================================
```

## ğŸ“š é¡¹ç›®æ–‡æ¡£

- **README.md**ï¼šé¡¹ç›®æ€»ä½“ä»‹ç»
- **å¯åŠ¨è¯´æ˜.md**ï¼šæœ¬æ–‡æ¡£
- **åç«¯å¼€å‘è®¡åˆ’è®¾è®¡.md**ï¼šå¼€å‘è®¡åˆ’
- **éœ€æ±‚è§„æ ¼æ–‡æ¡£è¯´æ˜ä¹¦.md**ï¼šéœ€æ±‚æ–‡æ¡£

## ğŸ› ï¸ å¼€å‘è°ƒè¯•

### å¯ç”¨è°ƒè¯•æ—¥å¿—

ä¿®æ”¹ `application-dev.yml`ï¼š

```yaml
logging:
  level:
    root: DEBUG
    com.xiaoins.admin: DEBUG
    com.baomidou.mybatisplus: DEBUG
```

### æŸ¥çœ‹ SQL æ—¥å¿—

MyBatis-Plus å·²é…ç½®ä¸ºè¾“å‡º SQL æ—¥å¿—ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

### å…³é—­ Flyway

å¦‚æœä¸éœ€è¦è‡ªåŠ¨æ‰§è¡Œæ•°æ®åº“è¿ç§»ï¼š

```yaml
spring:
  flyway:
    enabled: false
```

---

**é¡¹ç›®çŠ¶æ€**ï¼šâœ… ç¼–è¯‘é€šè¿‡ï¼Œå¯ä»¥æ­£å¸¸å¯åŠ¨ï¼ˆéœ€è¦é…ç½®æ•°æ®åº“å’ŒRedisï¼‰

